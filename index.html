<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Добавлены мета-теги для лучшей поддержки iPhone -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Мой билет</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" />
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="main-container">
      <div class="root">
        <div class="groups">
          <span class="my-ticket">Мой билет</span>
          <div class="image"></div>
          <div class="image-1"></div>
        </div>
        <div class="image-2">
          <div class="groups-3">
            <div class="groups-4">
              <div class="background">
                <!-- Добавлены id для времени и даты -->
                <span id="current-time" class="time">14:34</span>
                <span id="current-date" class="date">6 декабря</span>
                <div class="image-5"></div>
              </div>
            </div>
            <div class="background-6">
              <div class="groups-7">
                <div class="flex-row">
                  <div class="background-8"></div>
                  <!-- Добавлены id для минут и секунд -->
                  <span id="seconds" class="number-20">00</span>
                  <span id="minutes" class="number-44">59</span>
                </div>
                <div class="flex-row-d">
                  <span class="minutes">Минуты</span>
                  <span class="seconds">Секунды</span>
                </div>
              </div>
            </div>
            <div class="groups-9">
              <div class="background-a"></div>
              <div class="groups-b">
                <div class="flex-row-bc">
                  <div class="ticket">
                    <span class="ticket-info">1 билет - </span>
                    <span class="price">39 </span>
                    <span class="currency">₽</span>
                  </div>
                  <div class="button">
                    <div class="background-c">
                      <span class="travel">Проезд</span>
                    </div>
                  </div>
                </div>
                <span class="mpv-vpopat">МПВ "ВПОПАТ №1"</span>
                <div class="image-d"></div>
              </div>
              <div class="groups-e">
                <!-- Добавлены contenteditable и id для редактируемых полей -->
                <span id="editable-text" class="ab-531-25" contenteditable="true">AB 531 25</span>
                <span id="editable-number" class="no-95" contenteditable="true">№95</span>
              </div>
            </div>
          </div>
          <div class="groups-f">
            <div class="button-10">
              <div class="background-11">
                <span class="buy-ticket">КУПИТЬ БИЛЕТ</span>
              </div>
            </div>
            <div class="button-12">
              <div class="background-13">
                <span class="present">предъявить</span>
              </div>
            </div>
          </div>
        </div>
        <div class="background-14">
          <div class="groups-15">
            <div class="groups-16">
              <div class="image-17"></div>
              <span class="history">История</span>
            </div>
            <div class="groups-18">
              <div class="image-19"></div>
              <span class="my-ticket-1a">Мой билет</span>
            </div>
            <div class="groups-1b">
              <div class="image-1c"></div>
              <span class="payment">Оплата</span>
            </div>
            <div class="groups-1d">
              <div class="image-1e"></div>
              <span class="menu">Меню</span>
            </div>
          </div>
        </div>
      </div>
      <div class="background-1f"></div>
    </div>

    <!-- Добавлен JavaScript -->
    <script>
      // Функция для обновления времени и даты
      function updateDateTime() {
        const now = new Date();
        
        // Форматирование времени (часы:минуты)
        const hours = now.getHours().toString().padStart(2, '0');
        const minutes = now.getMinutes().toString().padStart(2, '0');
        document.getElementById('current-time').textContent = `${hours}:${minutes}`;
        
        // Форматирование даты (число месяц в родительном падеже)
        const day = now.getDate();
        const months = [
          'января', 'февраля', 'марта', 'апреля', 'мая', 'июня',
          'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'
        ];
        const month = months[now.getMonth()];
        document.getElementById('current-date').textContent = `${day} ${month}`;
      }
      
      // Обратный отсчет 59:00 -> 00:00
      let countdownMinutes = 59;
      let countdownSeconds = 0;
      
      function updateCountdown() {
        const minutesElement = document.getElementById('minutes');
        const secondsElement = document.getElementById('seconds');
        
        // Форматирование с ведущим нулем
        minutesElement.textContent = countdownMinutes.toString().padStart(2, '0');
        secondsElement.textContent = countdownSeconds.toString().padStart(2, '0');
        
        // Уменьшение времени
        if (countdownSeconds === 0) {
          if (countdownMinutes === 0) {
            // Сброс на 59:00
            countdownMinutes = 59;
            countdownSeconds = 0;
          } else {
            countdownMinutes--;
            countdownSeconds = 59;
          }
        } else {
          countdownSeconds--;
        }
      }
      
      // Настройка редактируемых полей
      function setupEditableFields() {
        const editableText = document.getElementById('editable-text');
        const editableNumber = document.getElementById('editable-number');
        
        // Сохранение изменений в localStorage
        function saveChanges(element, key) {
          element.addEventListener('blur', function() {
            localStorage.setItem(key, this.textContent);
          });
          
          // Восстановление сохраненных данных
          const saved = localStorage.getItem(key);
          if (saved) {
            element.textContent = saved;
          }
        }
        
        saveChanges(editableText, 'ticketText');
        saveChanges(editableNumber, 'ticketNumber');
        
        // Предотвращение пустых полей
        editableText.addEventListener('blur', function() {
          if (!this.textContent.trim()) {
            this.textContent = 'AB 531 25';
          }
        });
        
        editableNumber.addEventListener('blur', function() {
          if (!this.textContent.trim()) {
            this.textContent = '№95';
          }
        });
      }
      
      // Инициализация при загрузке страницы
      document.addEventListener('DOMContentLoaded', function() {
        // Обновление времени и даты сразу
        updateDateTime();
        
        // Обновление времени каждую минуту
        setInterval(updateDateTime, 60000);
        
        // Обновление обратного отсчета каждую секунду
        setInterval(updateCountdown, 1000);
        
        // Настройка редактируемых полей
        setupEditableFields();
        
        // Инициализация обратного отсчета
        updateCountdown();
      });
    </script>
  </body>
</html>